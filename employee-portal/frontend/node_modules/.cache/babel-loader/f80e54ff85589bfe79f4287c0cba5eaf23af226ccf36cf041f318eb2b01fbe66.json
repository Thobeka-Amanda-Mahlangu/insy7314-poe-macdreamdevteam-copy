{"ast":null,"code":"var _jsxFileName = \"/Users/nandimsimanga/NewDevSpace/Work-School/insy7314-poe-macdreamdevteam/employee-portal/frontend/src/context/AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n/*\n    Frontend Security & Auth References (Harvard style):\n\n    1. OWASP, 2025. *Authentication Cheat Sheet*. [online] Available at: \n       <https://cheatsheetseries.owasp.org/cheatsheets/Authentication_Cheat_Sheet.html> [Accessed 9 October 2025].\n       \n    2. OWASP, 2025. *Session Management Cheat Sheet*. [online] Available at: \n       <https://cheatsheetseries.owasp.org/cheatsheets/Session_Management_Cheat_Sheet.html> [Accessed 9 October 2025].\n\n    3. React Docs, 2025. *Context API*. [online] Available at: \n       <https://react.dev/reference/react/useContext> [Accessed 9 October 2025].\n\n    4. Mozilla Developer Network (MDN), 2025. *Web Storage API*. [online] Available at: \n       <https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API> [Accessed 9 October 2025].\n\n    5. Axios Docs, 2025. *Using Axios for HTTP requests*. [online] Available at: \n       <https://axios-http.com/docs/intro> [Accessed 9 October 2025].\n*/\n\nimport React, { createContext, useState, useContext, useEffect } from 'react';\nimport { publicApi, authApi } from '../api/api';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport const useAuth = () => {\n  _s();\n  return useContext(AuthContext);\n};\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const AuthProvider = ({\n  children\n}) => {\n  _s2();\n  const [user, setUser] = useState(null);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const navigate = useNavigate();\n\n  // Login function\n  const login = async credentials => {\n    try {\n      const response = await publicApi.post('/auth/login', credentials);\n      const {\n        token,\n        user: userData\n      } = response.data;\n\n      // Store token\n      localStorage.setItem('accessToken', token);\n      setUser(userData);\n      setIsAuthenticated(true);\n\n      // Redirect to portal\n      navigate('/portal');\n      return response.data;\n    } catch (error) {\n      console.error('Login failed:', error.response || error);\n      throw error;\n    }\n  };\n  const logout = () => {\n    localStorage.removeItem('accessToken');\n    setUser(null);\n    setIsAuthenticated(false);\n    navigate('/login');\n  };\n\n  // Check for existing token on initial load\n  useEffect(() => {\n    const token = localStorage.getItem('accessToken');\n    if (token) {\n      setIsAuthenticated(true);\n      setUser({\n        username: 'Employee'\n      });\n    }\n  }, []);\n  const value = {\n    user,\n    isAuthenticated,\n    login,\n    logout,\n    authApi,\n    publicApi\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 12\n  }, this);\n};\n_s2(AuthProvider, \"2gT3Teno6rKwKhH8PozLchmTS4I=\", false, function () {\n  return [useNavigate];\n});\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","publicApi","authApi","useNavigate","jsxDEV","_jsxDEV","AuthContext","useAuth","_s","AuthProvider","children","_s2","user","setUser","isAuthenticated","setIsAuthenticated","navigate","login","credentials","response","post","token","userData","data","localStorage","setItem","error","console","logout","removeItem","getItem","username","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/nandimsimanga/NewDevSpace/Work-School/insy7314-poe-macdreamdevteam/employee-portal/frontend/src/context/AuthContext.js"],"sourcesContent":["/*\n    Frontend Security & Auth References (Harvard style):\n\n    1. OWASP, 2025. *Authentication Cheat Sheet*. [online] Available at: \n       <https://cheatsheetseries.owasp.org/cheatsheets/Authentication_Cheat_Sheet.html> [Accessed 9 October 2025].\n       \n    2. OWASP, 2025. *Session Management Cheat Sheet*. [online] Available at: \n       <https://cheatsheetseries.owasp.org/cheatsheets/Session_Management_Cheat_Sheet.html> [Accessed 9 October 2025].\n\n    3. React Docs, 2025. *Context API*. [online] Available at: \n       <https://react.dev/reference/react/useContext> [Accessed 9 October 2025].\n\n    4. Mozilla Developer Network (MDN), 2025. *Web Storage API*. [online] Available at: \n       <https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API> [Accessed 9 October 2025].\n\n    5. Axios Docs, 2025. *Using Axios for HTTP requests*. [online] Available at: \n       <https://axios-http.com/docs/intro> [Accessed 9 October 2025].\n*/\n\nimport React, { createContext, useState, useContext, useEffect } from 'react';\nimport { publicApi, authApi } from '../api/api';\nimport { useNavigate } from 'react-router-dom';\n\nconst AuthContext = createContext();\n\nexport const useAuth = () => useContext(AuthContext);\n\nexport const AuthProvider = ({ children }) => {\n    const [user, setUser] = useState(null);\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\n    const navigate = useNavigate();\n\n    // Login function\n    const login = async (credentials) => {\n        try {\n            const response = await publicApi.post('/auth/login', credentials);\n            \n            const { token, user: userData } = response.data;\n            \n            // Store token\n            localStorage.setItem('accessToken', token);\n            \n            setUser(userData);\n            setIsAuthenticated(true);\n            \n            // Redirect to portal\n            navigate('/portal'); \n            \n            return response.data;\n        } catch (error) {\n            console.error('Login failed:', error.response || error);\n            throw error; \n        }\n    };\n\n    const logout = () => {\n        localStorage.removeItem('accessToken');\n        setUser(null);\n        setIsAuthenticated(false);\n        navigate('/login');\n    };\n    \n    // Check for existing token on initial load\n    useEffect(() => {\n        const token = localStorage.getItem('accessToken');\n        if (token) {\n             setIsAuthenticated(true);\n             setUser({ username: 'Employee' }); \n        }\n    }, []);\n\n    const value = {\n        user,\n        isAuthenticated,\n        login,\n        logout,\n        authApi,\n        publicApi\n    };\n\n    return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n};\n"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AAC7E,SAASC,SAAS,EAAEC,OAAO,QAAQ,YAAY;AAC/C,SAASC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/C,MAAMC,WAAW,gBAAGT,aAAa,CAAC,CAAC;AAEnC,OAAO,MAAMU,OAAO,GAAGA,CAAA;EAAAC,EAAA;EAAA,OAAMT,UAAU,CAACO,WAAW,CAAC;AAAA;AAACE,EAAA,CAAxCD,OAAO;AAEpB,OAAO,MAAME,YAAY,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,GAAA;EAC1C,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACgB,eAAe,EAAEC,kBAAkB,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAMkB,QAAQ,GAAGb,WAAW,CAAC,CAAC;;EAE9B;EACA,MAAMc,KAAK,GAAG,MAAOC,WAAW,IAAK;IACjC,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMlB,SAAS,CAACmB,IAAI,CAAC,aAAa,EAAEF,WAAW,CAAC;MAEjE,MAAM;QAAEG,KAAK;QAAET,IAAI,EAAEU;MAAS,CAAC,GAAGH,QAAQ,CAACI,IAAI;;MAE/C;MACAC,YAAY,CAACC,OAAO,CAAC,aAAa,EAAEJ,KAAK,CAAC;MAE1CR,OAAO,CAACS,QAAQ,CAAC;MACjBP,kBAAkB,CAAC,IAAI,CAAC;;MAExB;MACAC,QAAQ,CAAC,SAAS,CAAC;MAEnB,OAAOG,QAAQ,CAACI,IAAI;IACxB,CAAC,CAAC,OAAOG,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,eAAe,EAAEA,KAAK,CAACP,QAAQ,IAAIO,KAAK,CAAC;MACvD,MAAMA,KAAK;IACf;EACJ,CAAC;EAED,MAAME,MAAM,GAAGA,CAAA,KAAM;IACjBJ,YAAY,CAACK,UAAU,CAAC,aAAa,CAAC;IACtChB,OAAO,CAAC,IAAI,CAAC;IACbE,kBAAkB,CAAC,KAAK,CAAC;IACzBC,QAAQ,CAAC,QAAQ,CAAC;EACtB,CAAC;;EAED;EACAhB,SAAS,CAAC,MAAM;IACZ,MAAMqB,KAAK,GAAGG,YAAY,CAACM,OAAO,CAAC,aAAa,CAAC;IACjD,IAAIT,KAAK,EAAE;MACNN,kBAAkB,CAAC,IAAI,CAAC;MACxBF,OAAO,CAAC;QAAEkB,QAAQ,EAAE;MAAW,CAAC,CAAC;IACtC;EACJ,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,KAAK,GAAG;IACVpB,IAAI;IACJE,eAAe;IACfG,KAAK;IACLW,MAAM;IACN1B,OAAO;IACPD;EACJ,CAAC;EAED,oBAAOI,OAAA,CAACC,WAAW,CAAC2B,QAAQ;IAACD,KAAK,EAAEA,KAAM;IAAAtB,QAAA,EAAEA;EAAQ;IAAAwB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAuB,CAAC;AAChF,CAAC;AAAC1B,GAAA,CAtDWF,YAAY;EAAA,QAGJN,WAAW;AAAA;AAAAmC,EAAA,GAHnB7B,YAAY;AAAA,IAAA6B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}